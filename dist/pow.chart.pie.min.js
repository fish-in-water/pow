(function(a){var b=a.POW;b.Chart.Pie=function(a,c,d){b.Chart.Core.call(this,a,c,d)},b.Chart.Core.prototype._inheritPrototype(b.Chart.Pie,b.Chart.Core);var c=b.Chart.Pie.prototype;c._DEFAULT={chart:{pieRadius:"",startingAngle:"0",legendPosition:"RIGHT",plotBorderThickness:"1.5",plotBorderColor:"FFFFFF",plotBorderAlpha:"80",plotFillAlpha:"30",plotBorderDashed:"0",plotBorderDashedStyle:"0",plotPadding:"10",seriesNameInToolTip:"1",dataValueInToolTip:"1",percentInToolTip:"1",showValueLabel:"1",valueLabelPadding:"5",seriesNameInValueLabel:"1",dataValueInValueLabel:"1",percentInValueLabel:"1",valueLabelSepChar:", ",showLabelLine:"1",labelLineSlanted:"1",labelLinePadding:"2",labelLineClearance:"15",labelLineDistance:"10",labelLineColor:"545454",labelLineThickness:"1",labelLineAlpha:"100",labelLineDashed:"0",labelLineDashedStyle:"-",dataset:[{seriesName:"",fillColor:"",fillAlpha:"",borderColor:"",borderAlpha:"",borderDashed:"",borderDashedStyle:"",set:[{label:"",value:"0",displayValue:"",toolText:"",fillColor:"",fillAlpha:"",borderColor:"",borderAlpha:"",borderDashed:"",borderDashedStyle:""}]}]}},c._RESOURCE={},c._CONST={},b.Chart.Core.prototype._extendObject(c._DEFAULT,b.Chart.Core.prototype._DEFAULT),b.Chart.Core.prototype._extendObject(c._RESOURCE,b.Chart.Core.prototype._RESOURCE),b.Chart.Core.prototype._extendObject(c._CONST,b.Chart.Core.prototype._CONST),c.setData=function(a){this._setDefault(a),this._initBBox(a),this._drawBase(a),this._drawPie(a)},c._getDataByUrl=function(a){var b=this._loadXmlUrl(a),c=this._tranXml2Object(b);return this._setDefault(c),c},c._setDefault=function(a){this._standardizeObject(a,this._DEFAULT.chart)},c._fixData=function(a){},c._drawPie=function(a){this._setPatternInfo(a),this._createPatternPlot(a)},c._createPatternPlot=function(a){var b=a.dataset;if(!b)return null;for(var c=a.plotBorderThickness-0,d=a.plotBorderColor,e=a.plotBorderAlpha-0,f=a.plotBorderDashed,g=a.plotBorderDashedStyle,h=(Math.floor(a.plotFillAlpha-0),Math.floor(a.plotPadding-0),this._getCanvasBBox(a)),i=Math.floor((h.x+h.x2)/2),j=Math.floor((h.y+h.y2)/2),k=a.pieRadius,l=0,m=b.length;l<m;l++)for(var n=b[l].set,o=0,p=n.length;o<p;o++){var q=n[o],r=q.startAngle,s=q.endAngle,t=q.fillColor||b[l].fillColor,u=Math.floor((q.fillAlpha||b[l].fillAlpha||e)-0)/100,v=q.borderColor||b[l].borderColor||d,w=q.borderAlpha||b[l].borderAlpha||e,x=q.borderDashed||b[l].borderDashed||f,y=this._CONST.ENABLE===x?q.borderDashedStyle||b[l].borderDashedStyle||g:"",z=0,A=0;0===c&&(z=0-1*Math.sin((r+s)/2/180*Math.PI),A=1*Math.cos((r+s)/2/180*Math.PI));this._createCake({cx:i,cy:j,dx:z,dy:A,radius:k,"start-angle":r,"end-angle":s,stroke:v,"stroke-width":c,"stroke-opacity":w,"stroke-dasharray":y,fill:t,"fill-opacity":u})}for(var l=0,m=b.length;l<m;l++)for(var n=b[l].set,t=b[l].fillColor,o=0,p=n.length;o<p;o++){var q=n[o],r=q.startAngle,s=q.endAngle,z=0,A=0;0===c&&(z=0-1*Math.sin((r+s)/2/180*Math.PI),A=1*Math.cos((r+s)/2/180*Math.PI));var B=this._createCake({cx:i,cy:j,dx:z,dy:A,radius:k,"start-angle":r,"end-angle":s,stroke:"#FFFFFF","stroke-width":0,"stroke-opacity":0,fill:"#FFFFFF","fill-opacity":0});B.node["click-data"]=q.click,B.node["mouseover-data"]=q.mouseover,B.node["mousemove-data"]=q.mousemove,B.node["mouseout-data"]=q.mouseout,B.node["tooltip-data"]=q.toolTip}var C=a.showValueLabel;if(this._CONST.ENABLE===C)for(var D=Math.floor(a.pieRadius-0),h=this._getCanvasBBox(a),E=(h.x+h.x2)/2,F=(h.y+h.y2)/2,G=this._getFontStyle(a,this._CONST.STYLEOBJECT.VALUELABEL),H=a.showLabelLine,I=a.labelLineSlanted,J=Math.floor(a.labelLinePadding-0),K=Math.floor(a.labelLineClearance-0),L=Math.floor(a.labelLineDistance-0),M=a.labelLineColor,N=Math.floor(a.labelLineThickness-0),O=Math.floor(a.labelLineAlpha-0)/100,P=this._CONST.ENABLE===a.labelLineDashed?a.labelLineDashedStyle:"",Q=Math.floor(a.valueLabelPadding-0),l=0,m=b.length;l<m;l++)for(var n=b[l].set,k=b[l].radius,o=0,p=n.length;o<p;o++){var q=n[o],R=this._createRadiantLabel({cx:E,cy:F,radius:D,angle:q.middleAngle,label:q.valueLabel,"label-padding":Q,"font-family":G.font,"font-size":G.size,"font-color":G.color,"font-weight":G.bold,"show-line":H,"line-slanted":I,"line-padding":J,"line-clearance":K,"line-distance":L,"line-color":M,"line-thickness":N,"line-alpha":O,"line-dashed-style":P});R["click-data"]=q.click,R["mouseover-data"]=q.mouseover,R["mousemove-data"]=q.mousemove,R["mouseout-data"]=q.mouseout,R["tooltip-data"]=q.toolTip}},c._createCake=function(a){var b=a.cx,c=a.cy,d=a.dx,e=a.dy,f=a.radius,g=a["start-angle"],h=a["end-angle"],i=(a["stroke-width"],null);if(359.9<h-g)i=this._paper.circle(b,c,f);else{var j=b+f*Math.sin(g/180*Math.PI),k=c-f*Math.cos(g/180*Math.PI),l=b+f*Math.sin(h/180*Math.PI),m=c-f*Math.cos(h/180*Math.PI),n=[];n[n.length]=["M",b+d,c+e],n[n.length]=["L",j+d,k+e],n[n.length]=["A",f,f,0,180<=h-g?1:0,1,l+d,m+e],n[n.length]=["Z"],i=this._paper.path(n)}return i.attr({stroke:this._getColor(a.stroke),"stroke-width":a["stroke-width"],"stroke-opacity":a["stroke-opacity"],"stroke-dasharray":a["stroke-dasharray"],fill:this._getColor(a.fill),"fill-opacity":a["fill-opacity"],"stroke-linecap":"round","stroke-linejoin":"miter"}),i},c._setPatternInfo=function(a){var b=a.dataset;if(!b)return null;for(var c=0,d=0,e=b.length;d<e;d++)for(var f=b[d].set,g=0,h=f.length;g<h;g++){var i=f[g];c+=(i.value||"0")-0}for(var j=Math.floor(a.startingAngle-0)%360,d=0,e=b.length;d<e;d++)for(var f=b[d].set,g=(b[d].seriesName,0),h=f.length;g<h;g++){var i=f[g],k=(i.value||"0")-0,l=k/c*360;i.startAngle=j,i.endAngle=j+=l,i.middleAngle=(i.startAngle+i.endAngle)/2,i.formatValue=this._getFormatNumber(a,k),i.percent=this._getFormatNumber(a,k/c*100)+"%"}for(var d=0,e=b.length;d<e;d++)for(var f=b[d].set,g=0,h=f.length;g<h;g++){var i=f[g];i.toolTip=this._getToolTip(a,b[d],i)}for(var d=0,e=b.length;d<e;d++)for(var f=b[d].set,g=(b[d].seriesName,0),h=f.length;g<h;g++){var i=f[g];i.valueLabel=this._getValueLabel(a,b[d],i)}if(!a.pieRadius){for(var m=[],d=0,e=b.length;d<e;d++)for(var f=b[d].set,g=0,h=f.length;g<h;g++)m[m.length]=f[g];a.pieRadius=this._calcSmartRadius(a,m,this._CONST.STYLEOBJECT.VALUELABEL)}}}).call(this,window);