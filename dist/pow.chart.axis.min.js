(function(a){var b=a.POW;b.Chart.Axis=function(a,c,d){b.Chart.Core.call(this,a,c,d)},b.Chart.Core.prototype._inheritPrototype(b.Chart.Axis,b.Chart.Core);var c=b.Chart.Axis.prototype;c._DEFAULT={chart:{rotateXY:"0",XYPlot:"0",xAxisMinValue:"",xAxisMaxValue:"",showXAxisLabel:"1",xAxisLabelDisplay:"WRAP",rotateXAxisLabel:"0",slantXAxisLabel:"0",xAxisLabelStep:"1",xAxisLabelStaggerLine:"2",xAxisLabelPadding:"5",showPYAxisLabel:"1",rotatePYAxisName:"1",PYAxisLabelPadding:"5",showSYAxisLabel:"1",rotateSYAxisName:"1",SYAxisLabelPadding:"5",hDivLineNum:"4",hDivLineColor:"C1C0BE",hDivLineThickness:"1",hDivLineAlpha:"100",hDivLineIsDashed:"0",hDivLineDashStyle:"-",showAlternateHGridColor:"1",alternateHGridColor:"AAAAAA",alternateHGridAlpha:"15",showHZeroPlane:"1",hZeroPlaneColor:"545454",hZeroPlaneThickness:"2",hZeroPlaneAlpha:"100",hZeroPlaneIsDashed:"0",hZeroPlaneDashStyle:"-",vDivLineColor:"C1C0BE",vDivLineThickness:"1",vDivLineAlpha:"100",vDivLineIsDashed:"0",vDivLineDashStyle:"-",showAlternateVGridColor:"1",alternateVGridColor:"AAAAAA",alternateVGridAlpha:"15",showVZeroPlane:"1",vZeroPlaneColor:"545454",vZeroPlaneThickness:"2",vZeroPlaneAlpha:"100",vZeroPlaneIsDashed:"0",vZeroPlaneDashStyle:"-",PYAxisDivLineRoundNumber:"5",SYAxisDivLineRoundNumber:"5",showValueLabel:"1",rotateValueLabel:"0",placeValueLabelInside:"0",valueLabelPadding:"3",plotPadding:"3",plotSetPadding:"7",plotMaxWidth:"120",categories:{sepLineThickness:"0",sepLineColor:"000000",sepLineAlpha:"50",sepLineDashed:"0",sepLineDashedStyle:"-",category:[{label:"",x:""}]},dataset:[{parentYAxis:"P",pattern:"COLUMN",seriesName:"",stackedGroup:"",lineCurvature:"100",blShowOnTop:"1",lineColor:"000000",lineThickness:"",lineAlpha:"100",lineDashed:"0",lineDashedStyle:"-",trendArrow:"0",drawAnchors:"1",anchorsShowOnTop:"1",anchorSides:"0",anchorRadius:"3",anchorBorderColor:"000000",anchorBorderThickness:"1",anchorBorderAlpha:"100",anchorBgColor:"000000",anchorBgAlpha:"100",fillColor:"000000",fillAlpha:"80",fillAngle:"90",gradientColor:"",bubbleGradientOffset:"30,30",set:[{x:"0",y:"0",r:"0",click:"",fillColor:"",mouseover:"",mousemove:"",mouseout:""}]}],hTrendlines:{line:[{parentYAxis:"P",y0:"",y1:"",color:"91C728",thickness:"1",alpha:"",dashed:"0",dashedStyle:"-",toolText:"",isTrendZone:"0",displayValue:""}]},vTrendlines:{line:[{x0:"",x1:"",color:"91C728",thickness:"1",alpha:"",dashed:"0",dashedStyle:"-",toolText:"",isTrendZone:"0",displayValue:""}]}}},c._RESOURCE={},c._CONST={},b.Chart.Core.prototype._extendObject(c._DEFAULT,b.Chart.Core.prototype._DEFAULT),b.Chart.Core.prototype._extendObject(c._RESOURCE,b.Chart.Core.prototype._RESOURCE),b.Chart.Core.prototype._extendObject(c._CONST,b.Chart.Core.prototype._CONST),c.setData=function(a){this._setDefault(a),this._adjustData(a),this._initAxises(a),this._initBBox(a),this._drawBase(a),this._drawAxis(a)},c._getDataByUrl=function(a){var b=this._loadXmlUrl(a),c=this._tranXml2Object(b);return this._setDefault(c),this._adjustData(c),this._initAxises(c),c},c._setDefault=function(a){this._standardizeObject(a,this._DEFAULT.chart);var b=this._getDatasets(a,this._CONST.PATTERN.COLUMN);0<this._getDatasets(a,null).length-b.length?a.vDivLineThickness=a.vDivLineThickness||"1":a.categories.sepLineThickness=a.categories.sepLineThickness||"1"},c._adjustData=function(a){var b=a.rotateXY;if(this._CONST.ENABLE===b){a.SYAxisName="";var c=a.datasets;if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];f.parentYAxis=this._CONST.AXIS.PY}var g=a.hTrendlines;if(g){var h=g.line;if(h)for(var d=0,e=h.length;d<e;d++)h[d].parentYAxis=this._CONST.AXIS.PY}var i=a.vTrendlines;if(i){var j=i.line;if(j)for(var d=0,e=j.length;d<e;d++)j[d].parentYAxis=this._CONST.AXIS.PY}}},c._drawAxis=function(a){this._createXAxisLabel(a),this._createPYAxisLabel(a),this._createSYAxisLabel(a),this._createHDivLine(a),this._createVDivLine(a),this._createSepLine(a),this._createHTrendLine(a),this._createVTrendLine(a),this._createDataPlot(a),this._createCanvasBorder(a)},c._initAxises=function(a){var b=[],c=void 0!==a.categories?a.categories.category:null;if(c){var d=a.XYPlot;if(this._CONST.ENABLE===d){for(var e=Number.MAX_VALUE,f=0-Number.MAX_VALUE,g=0,h=c.length;g<h;g++){var i=c[g],j=i.label||"",k=i.x;if(!k)throw Error("shit");e=k-0<e?k-0:e,f=k-0>f?k-0:f,b[b.length]={value:k-0,label:j,visiable:"1"}}var l=a.xAxisMinValue;l&&l-0<e&&b.splice(0,0,{value:l-0,label:"",visiable:"1"});var m=a.xAxisMaxValue;m&&m-0>f&&(b[b.length]={value:m-0,label:"",visiable:"1"})}else{if(0===this._getDatasets(a,this._CONST.PATTERN.COLUMN).length&&1!==c.length)for(var g=0,h=c.length;g<h;g++)b[b.length]={value:g,label:c[g].label||"",visiable:"1"};else{b[b.length]={value:-.5,label:"",visiable:"0"};for(var g=0,h=c.length;g<h;g++)b[b.length]={value:g,label:c[g].label||"",visiable:"1"};b[b.length]={value:h-.5,label:"",visiable:"0"}}}this._CONST.ENABLE===a.rotateXY&&(b=b.reverse())}var n=this._getPosReg(a),o=this._getYAxisDiv(a,this._CONST.AXIS.PY,n,Math.floor(a.hDivLineNum-0),Math.floor(a.PYAxisDivLineRoundNumber-0)),p=this._getYAxisDiv(a,this._CONST.AXIS.SY,n,Math.floor(a.hDivLineNum-0),Math.floor(a.SYAxisDivLineRoundNumber-0)),q=o.start,r=o.end;p&&(q=p.start<q?p.start:q,r=p.end>r?p.end:r);for(var s=[],g=q;g<=r;g++)s[s.length]={value:g*o.each,label:this._getFormatNumber(a,g*o.each)};var t=null;if(p){t=[];for(var g=q;g<=r;g++)t[t.length]={value:g*p.each,label:this._getFormatNumber(a,g*p.each)}}a.axises={xAxiseset:b,PYAxiseset:s,SYAxiseset:t}},c._createXAxisLabel=function(a){var b=a.showXAxisLabel;if(this._CONST.ENABLE===b){var c=null;if((c=this._CONST.ENABLE===a.rotateXY?a.axises.PYAxiseset:a.axises.xAxiseset)&&0!==c.length)for(var d=this._getXAxisLabelBBox(a),e=(d.x,d.y),f=(d.x2,d.y2),g=d.width,h=d.height,i=g/c.length,j=a.rotateXAxisLabel,k=this._CONST.ENABLE===j?this._CONST.LABELDISPLAY.ROTATE:a.xAxisLabelDisplay,l=this._getFontStyle(a,this._CONST.STYLEOBJECT.XAXISLABEL),m=Math.floor(a.xAxisLabelStep-0),n=this._getTextWH(a,this._CONST.STYLEOBJECT.XAXISLABEL,"0",0,!1).height,o=0,p=c.length;o<p;o++)if(0==o%m){var q=c[o],r=q.label||"",s=this._getXAxisPos(a,q.value);if(this._CONST.LABELDISPLAY.NONE===k){var t=(e+f)/2;this._createText({text:r,cx:s,cy:t,"font-family":l.font,"font-size":l.size,"font-color":l.color,"font-weight":l.bold})}else if(this._CONST.LABELDISPLAY.STAGGER===k){var u=Math.floor(a.xAxisLabelStaggerLine-0);t=e+(.5+o%u)*n,this._createText({text:r,cx:s,cy:t,"font-family":l.font,"font-size":l.size,"font-color":l.color,"font-weight":l.bold})}else if(this._CONST.LABELDISPLAY.WRAP===k){var t=(e+f)/2;this._createText({text:r,cx:s,cy:t,width:.9*i,height:h,"line-height":n,"font-family":l.font,"font-size":l.size,"font-color":l.color,"font-weight":l.bold,"word-break":"1"})}else if(this._CONST.LABELDISPLAY.ROTATE===k){var v=a.slantXAxisLabel,w=l.size-0;if(this._CONST.ENABLE===v){var t=e;if(Raphael.svg){if(s-=h,this._CONST.WEBKITMINFONTSIZE-0>w){var x=w/(this._CONST.WEBKITMINFONTSIZE-0);this._browser.browser.chrome||this._browser.browser.opera?s+=n*(1-x):(s+=n,s+=n/2)}else s+=n,s+=n/2;t+=n/Math.sqrt(2)/2}else t+=n/Math.sqrt(2)/2;this._createText({text:r,cx:s,cy:t,width:h*Math.sqrt(2),height:n,lineHeight:n,"font-family":l.font,"font-size":l.size,"font-color":l.color,"font-weight":l.bold,angle:315,"transform-origin":"top right","text-align":"right"})}else{var s=s,t=Raphael.vml?e:(e+f)/2+3;this._createText({text:r,cx:s,cy:t,width:h,height:n,lineHeight:n,"font-family":l.font,"font-size":l.size,"font-color":l.color,"font-weight":l.bold,angle:270,"text-align":"right"})}}}}},c._createPYAxisLabel=function(a){this._createYAxisLabel(a,this._CONST.AXIS.PY)},c._createSYAxisLabel=function(a){this._createYAxisLabel(a,this._CONST.AXIS.SY)},c._createYAxisLabel=function(a,b){var c=null,d=null,e=null,f=null,g=null;if(this._CONST.AXIS.SY===b){if(this._CONST.ENABLE===a.rotateXY)return;c=a.showSYAxisLabel,d=this._getSYAxisLabelBBox(a),e=a.axises.SYAxiseset,f=this._CONST.STYLEOBJECT.SYAXISLABEL,g=this._CONST.TEXTALIGN.LEFT}else e=this._CONST.ENABLE===a.rotateXY?a.axises.xAxiseset:a.axises.PYAxiseset,c=a.showPYAxisLabel,d=this._getPYAxisLabelBBox(a),f=this._CONST.STYLEOBJECT.PYAXISLABEL,g=this._CONST.TEXTALIGN.RIGHT;if(this._CONST.ENABLE===c&&e)for(var h=this._getTextWH(a,f,"0",0,!1).height,i=this._getFontStyle(a,f),j=0,k=e.length;j<k;j++){var l=e[j].label||"",m=e[j].value||"0",n=(d.x+d.x2)/2,o=this._getYAxisPos(a,m,b);this._createText({text:l,cx:n,cy:o,width:d.width,height:h,"font-family":i.font,"font-size":i.size,"font-color":i.color,"font-weight":i.bold,"text-align":g})}},c._createHTrendLine=function(a){this._createTrendLine(a,this._CONST.TRENDLINE.H)},c._createVTrendLine=function(a){this._createTrendLine(a,this._CONST.TRENDLINE.V)},c._createTrendLine=function(a,b){var c=(a.XYPlot,a.rotateXY),d=Math.floor(a.canvasBorderThickness-0),e=this._getCanvasBBox(a),f=this._getPYAxisLabelBBox(a),g=this._getSYAxisLabelBBox(a),h=this._getXAxisLabelBBox(a),i=null,j=null;if(this._CONST.TRENDLINE.H===b?(j=a.hTrendlines?a.hTrendlines.line:null,i=this._CONST.STYLEOBJECT.HTRENDLABEL):(j=a.vTrendlines?a.vTrendlines.line:null,i=this._CONST.STYLEOBJECT.VTRENDLABEL),j)for(var k=this._getFontStyle(a,i),l=(this._getTextWH(a,i,"0",0,!0).height,a.axises.PYAxiseset),m=a.axises.xAxiseset,n=0,o=j.length;n<o;n++){var p=j[n],q=p.parentYAxis,r=null,s=null;if(this._CONST.ENABLE===p.isTrendZone){var t=Math.floor(p.alpha||30)/100,u=null,v=null,w=null,x=null;if(this._CONST.ENABLE!==c&&this._CONST.TRENDLINE.H===b||this._CONST.ENABLE===c&&this._CONST.TRENDLINE.V===b){var y=null,z=null;this._CONST.ENABLE===c?(y=(p.x0||m[0].value)-0,z=(p.x1||m[m.length-1].value)-0):(y=(p.y0||l[0].value)-0,z=(p.y1||l[l.length-1].value)-0),u=Math.floor(e.x+d/2),v=Math.floor(this._getYAxisPos(a,y,q)),w=Math.floor(e.x2-d/2),x=Math.floor(this._getYAxisPos(a,z,q)),r=null,r=this._CONST.AXIS.PY===q?(f.x+f.x2)/2:(g.x+g.x2)/2,s=(v+x)/2}else{var y=null,z=null;this._CONST.ENABLE===c?(y=(p.y0||l[0].value)-0,z=(p.y1||l[l.length-1].value)-0):(y=(p.x0||m[0].value)-0,z=(p.x1||m[m.length-1].value)-0),u=Math.floor(this._getXAxisPos(a,y)),v=Math.floor(e.y+d/2),w=Math.floor(this._getXAxisPos(a,z)),x=Math.floor(e.y2-d/2),r=(u+w)/2,s=(h.y+h.y2)/2}var A=[];A[A.length]=["M",u,v],A[A.length]=["L",w,v],A[A.length]=["L",w,x],A[A.length]=["L",u,x],A[A.length]=["Z"],this._paper.path(A).attr({"stroke-width":0,fill:this._getColor(p.color),"fill-opacity":t})}else{var t=Math.floor(p.alpha||100)/100,u=null,v=null,w=null,x=null;if(this._CONST.ENABLE!==c&&this._CONST.TRENDLINE.H===b||this._CONST.ENABLE===c&&this._CONST.TRENDLINE.V===b){var y=null,z=null;if(this._CONST.ENABLE===c?(y=p.x0||"",z=p.x1||""):(y=p.y0||"",z=p.y1||""),""==y&&""==z)continue;y=(""==y?z:y)-0,z=(""==z?y:z)-0,u=Math.floor(e.x+d/2),v=Math.floor(this._getYAxisPos(a,y,q)),w=Math.floor(e.x2-d/2),x=Math.floor(this._getYAxisPos(a,z,q)),r=null,r=this._CONST.AXIS.PY===q?(f.x+f.x2)/2:(g.x+g.x2)/2,s=v}else{var y=null,z=null;if(this._CONST.ENABLE===c?(y=p.y0||"",z=p.y1||""):(y=p.x0||"",z=p.x1||""),""==y&&""==z)continue;y=(""==y?z:y)-0,z=(""==z?y:z)-0,u=Math.floor(this._getXAxisPos(a,y)),v=Math.floor(e.y2+d/2),w=Math.floor(this._getXAxisPos(a,z)),x=Math.floor(e.y-d/2),r=u,s=(h.y+h.y2)/2}var A=[];A[A.length]=["M",u,v],A[A.length]=["L",w,x],this._paper.path(A).attr({stroke:this._getColor(p.color),"stroke-width":Math.floor(p.thickness),"stroke-opacity":t,"stroke-dasharray":this._CONST.ENABLE===p.dashed?p.dashedStyle:""})}var B=p.displayValue;if(B){var C=null,D=this._CONST.TEXTALIGN.CENTER;(this._CONST.TRENDLINE.H===b&&this._CONST.ENABLE!==c||this._CONST.TRENDLINE.V===b&&this._CONST.ENABLE===c)&&(C=null,this._CONST.AXIS.PY===q?(C=f.width,D=this._CONST.TEXTALIGN.RIGHT):(C=g.width,D=this._CONST.TEXTALIGN.LEFT)),this._createText({text:B,cx:r,cy:s,width:C,height:12,"font-family":k.font,"font-size":k.size,"font-color":this._getColor(p.color),"font-weight":k.bold,"text-align":D})}}},c._createColumnPlot=function(a,b){var c=b.set;if(c){var d=b.lineColor,e=Math.floor(b.lineThickness||0),f=Math.floor(b.lineAlpha-0)/100,g=this._CONST.ENABLE===b.lineDashed?b.lineDashedStyle:"",h=b.fillColor,i=(360-Math.floor(b.fillAngle-0))%360,j=Math.floor(b.fillAlpha-0)/100,k=b.gradientColor,l=null;l=k?i+"-"+this._getColor(h)+"-"+this._getColor(k):this._getColor(h);for(var m=0,n=c.length;m<n;m++){var o=c[m],p=[];o.p0.x=Math.floor(o.p0.x),o.p0.y=Math.floor(o.p0.y),o.p1.x=Math.floor(o.p1.x),o.p1.y=Math.floor(o.p1.y),Raphael.vml&&(o.p0.x+=.5,o.p0.y+=.5,o.p1.x+=.5,o.p1.y+=.5),p[p.length]=["M",o.p0.x,o.p0.y],p[p.length]=["L",o.p1.x,o.p0.y],p[p.length]=["L",o.p1.x,o.p1.y],p[p.length]=["L",o.p0.x,o.p1.y],p[p.length]=["Z"];var q=this._paper.path(p).attr({stroke:this._getColor(d),"stroke-width":e,"stroke-opacity":f,"stroke-dasharray":g,fill:o.fillColor&&this._getColor(o.fillColor)||l,"fill-opacity":j});q.node["click-data"]=o.click,q.node["mouseover-data"]=o.mouseover,q.node["mousemove-data"]=o.mousemove,q.node["mouseout-data"]=o.mouseout,q.node["tooltip-data"]=o.toolTip}}},c._createAreaPlot=function(a,b){var c=b.set;if(c){var d=(this._getCanvasBBox(a),Math.floor(b.lineCurvature-0),b.fillColor),e=(360-Math.floor(b.fillAngle-0))%360,f=Math.floor(b.fillAlpha-0)/100,g=b.gradientColor,h=null;h=g?e+"-"+this._getColor(d)+"-"+this._getColor(g):this._getColor(d);for(var i=[],j=0,k=c.length;j<k;j++){var l=c[j],m=Math.floor(l.p0.x),n=Math.floor(l.p0.y);Raphael.vml&&(m+=.5),0===j&&(i=["M",m,n,"C",m,n]),k-1>j&&(i=i.concat([l.bcp0.x,l.bcp0.y,m,n,l.bcp1.x,l.bcp1.y])),k-1===j&&(i=i.concat([m,n,m,n]))}if(c[0].sbcp0.x)for(var j=c.length-1;j>=0;j--){var l=c[j],o=Math.floor(l.p1.x),p=Math.floor(l.p1.y);Raphael.vml&&(o+=.5),i=c.length-1==j?i.concat(["L",o,p,"C",o,p]):0<j?i.concat([l.sbcp1.x,l.sbcp1.y,o,p,l.sbcp0.x,l.sbcp0.y]):i.concat([o,p,o,p])}else i=i.concat(["L",c[c.length-1].p1.x,c[c.length-1].p1.y]),i=i.concat(["L",c[0].p1.x,c[0].p1.y]),i=i.concat(["Z"]);this._paper.path(i).attr({"stroke-width":0,fill:h,"fill-opacity":f})}},c._calcBezierAnchor=function(a,b,c,d,e){var f=null,g=null;this._CONST.ENABLE===a?(f=(c.y-b.y)/2,g=(d.y-c.y)/2):(f=(c.x-b.x)/2,g=(d.x-c.x)/2);var h=Math.atan((c.x-b.x)/Math.abs(c.y-b.y)),i=Math.atan((d.x-c.x)/Math.abs(c.y-d.y)),h=b.y<c.y?Math.PI-h:h,i=d.y<c.y?Math.PI-i:i,j=Math.PI/2-(h+i)%(2*Math.PI)/2,k=f*Math.sin(j+h)*e,l=f*Math.cos(j+h)*e,m=g*Math.sin(j+i)*e,n=g*Math.cos(j+i)*e;return{cp0:{x:c.x-0-k,y:c.y-0+l},cp1:{x:c.x-0+m,y:c.y-0+n}}},c._createLinePlot=function(a,b){var c=b.set;if(c){for(var d=(b.pattern,Math.floor(b.lineCurvature-0),b.lineColor),e=Math.floor(b.lineThickness||0),f=Math.floor(b.lineAlpha-0)/100,g=this._CONST.ENABLE===b.lineDashed?b.lineDashedStyle:"",h=[],i=0,j=c.length;i<j;i++){var k=c[i];0===i&&(h=["M",k.p0.x,k.p0.y,"C",k.p0.x,k.p0.y]),j-1>i&&(h=h.concat([k.bcp0.x,k.bcp0.y,k.p0.x,k.p0.y,k.bcp1.x,k.bcp1.y])),j-1===i&&(h=h.concat([k.p0.x,k.p0.y,k.p0.x,k.p0.y]))}this._paper.path(h).attr({stroke:this._getColor(d),"stroke-width":e,"stroke-opacity":f,"stroke-dasharray":g})}},c._createBubblePlot=function(a,b){var c=b.set;if(c){var d=b.lineColor,e=Math.floor(b.lineThickness||0),f=Math.floor(b.lineAlpha-0)/100,g=this._CONST.ENABLE===b.lineDashed?b.lineDashedStyle:"",h=b.fillColor,i=(Math.floor(b.fillAngle-0),Math.floor(b.fillAlpha-0)/100),j=b.gradientColor,k=b.bubbleGradientOffset,l=null;if(h)if(j){var m=k.split(","),n=Math.floor(m[0]-0)/100,o=1===m.length?n:Math.floor(m[1]-0)/100;l="r("+n+","+o+")"+this._getColor(j)+"-"+this._getColor(h)+":100"}else l=this._getColor(h);var p=null;p=this._CONST.ENABLE===a.rotateXY?this._getXAxisPos(a,1)-this._getXAxisPos(a,0):this._getYAxisPos(a,0,b.parentYAxis)-this._getYAxisPos(a,1,b.parentYAxis);for(var q=0,r=c.length;q<r;q++){var s=c[q],t=s.r||0,u=p*t;u=1>u?1:u;var v=this._paper.circle(s.p0.x,s.p0.y,u).attr({stroke:this._getColor(d),"stroke-width":e,"stroke-opacity":f,"stroke-dasharray":g,fill:l,"fill-opacity":i});v.node["click-data"]=s.click,v.node["mouseover-data"]=s.mouseover,v.node["mousemove-data"]=s.mousemove,v.node["mouseout-data"]=s.mouseout,v.node["tooltip-data"]=s.toolTip}}},c._createAnchorPlot=function(a,b){var c=b.set;if(c)for(var d=Math.floor(b.anchorSides-0),e=Math.floor(b.anchorRadius-0),f=b.anchorBorderColor,g=Math.floor(b.anchorBorderThickness-0),h=Math.floor(b.anchorBorderAlpha-0)/100,i=b.anchorBgColor,j=Math.floor(b.anchorBgAlpha-0)/100,k=0,l=c.length;k<l;k++){var m=c[k],n=this._createAnchor({cx:m.p0.x,cy:m.p0.y,side:d,radius:e,"border-color":f,"border-thickness":g,"border-alpha":h,"fill-color":i,"fill-alpha":j});n.node["click-data"]=m.click,n.node["mouseover-data"]=m.mouseover,n.node["mousemove-data"]=m.mousemove,n.node["mouseout-data"]=m.mouseout,n.node["tooltip-data"]=m.toolTip}},c._createPatternPlot=function(a){var b=a.dataset;if(b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.pattern;this._CONST.PATTERN.COLUMN===f?this._createColumnPlot(a,e):this._CONST.PATTERN.LINE===f?(this._createLinePlot(a,e),this._CONST.ENABLE===e.drawAnchors&&this._CONST.ENABLE!==e.anchorsShowOnTop&&this._createAnchorPlot(a,e)):this._CONST.PATTERN.AREA===f?(this._createAreaPlot(a,e),this._CONST.ENABLE!==e.blShowOnTop&&this._createLinePlot(a,e),this._CONST.ENABLE===e.drawAnchors&&this._CONST.ENABLE!==e.anchorsShowOnTop&&this._createAnchorPlot(a,e)):this._CONST.PATTERN.BUBBLE===f&&this._createBubblePlot(a,e)}for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.pattern;this._CONST.PATTERN.AREA===f&&this._CONST.ENABLE===e.blShowOnTop&&this._createLinePlot(a,e)}for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.pattern;if(this._CONST.PATTERN.LINE===f||this._CONST.PATTERN.AREA===f){var g=e.drawAnchors,h=e.anchorsShowOnTop;this._CONST.ENABLE===g&&this._CONST.ENABLE===h&&this._createAnchorPlot(a,e)}}}},c._createPlotValue=function(a){var b=a.showValueLabel;if(this._CONST.ENABLE===b){var c=a.dataset;if(c)for(var d=a.rotateXY,e=a.rotateValueLabel,f=a.placeValueLabelInside,g=Math.floor(a.valueLabelPadding-0),h=this._getCanvasBBox(a),i=this._CONST.STYLEOBJECT.VALUELABEL,j=this._getFontStyle(a,i),k=this._getTextWH(a,i,"0",0,!0).height,l=0,m=c.length;l<m;l++){var n=c[l],o=n.pattern,p=0;this._CONST.PATTERN.LINE!==o&&this._CONST.PATTERN.AREA!==o||this._CONST.ENABLE!==n.drawAnchors||(p=Math.floor(n.anchorRadius-0));var q=(n.parentYAxis,0),r=n.set;if(r){this._CONST.PATTERN.BUBBLE===o&&(q=this._CONST.ENABLE===a.rotateXY?this._getXAxisPos(a,0)-this._getXAxisPos(a,1):this._getYAxisPos(a,0,n.parentYAxis)-this._getYAxisPos(a,1,n.parentYAxis));for(var s=0,t=r.length;s<t;s++){var u=r[s],v=u.p0.x,w=u.p0.y,x=u.p1.x,y=u.p1.y,z=u.r||0,A=null,B=null,C=this._CONST.ENABLE===e?270:0;if(this._CONST.PATTERN.COLUMN===o){if(this._CONST.ENABLE===d){var D=null;D=this._CONST.ENABLE===e?k:this._getTextWH(a,i,u.displayValue,0,!1).width,A=0<=u.y-0?(this._CONST.ENABLE===f||D+g>h.x2-v)&&D+2*g<=v-x?v-g-D/2:D+g<=h.x2-v?v+g+D/2:x-g-D/2:(this._CONST.ENABLE===f||D+g>v-h.x)&&D+2*g<=x-v?v+g+D/2:D+g<=v-h.x?v-g-D/2:x+g+D/2,B=(w+y)/2}else{var E=null;E=this._CONST.ENABLE===e?this._getTextWH(a,i,u.displayValue,0,!1).width:k,A=(v+x)/2,B=0<=u.y-0?(this._CONST.ENABLE===f||E+g>w-h.y)&&E+2*g<=y-w?w+g+E/2:E+g<=w-h.y?w-g-E/2:y+g+E/2:(this._CONST.ENABLE===f||E+g>h.y2-w)&&E+2*g<=w-y?w-g-E/2:E+g<=h.y2-w?w+g+E/2:y+g+E/2}A+=2,B+=1}else if(this._CONST.PATTERN.LINE===o){var E=null;E=this._CONST.ENABLE===e?this._getTextWH(a,i,u.displayValue,0,!1).width:k,A=v,B=E+g+p<=w-h.y?w-g-E/2-p:w+g+E/2+p}else if(this._CONST.PATTERN.AREA===o)if(this._CONST.ENABLE===d){var E=null;E=this._CONST.ENABLE===e?this._getTextWH(a,i,u.displayValue,0,!1).width:k,A=v,B=E+g+p<=w-h.y?w-g-E/2-p:w+g+E/2+p}else{var E=null;E=this._CONST.ENABLE===e?this._getTextWH(a,i,u.displayValue,0,!1).width:k,A=(v+x)/2,B=0<=u.y-0?E+g+p<=w-h.y?w-g-E/2-p:w+g+E/2+p:E+g+p<=h.y2-w?w+g+E/2+p:w-g-E/2-p}else if(this._CONST.PATTERN.BUBBLE===o){var E=k,F=z*q;A=(v+x)/2,B=10<=F?w:E+g+F<=w-h.y?w-g-E/2-F:w+g+E/2}var G=this._createText({text:u.displayValue,cx:A,cy:B,angle:C,"font-family":j.font,"font-size":j.size,"font-color":j.color,"font-weight":j.bold,"text-align":this._CONST.TEXTALIGN.CENTER,"transform-origin":"center center"});G["click-data"]=u.click,G["mouseover-data"]=u.mouseover,G["mousemove-data"]=u.mousemove,G["mouseout-data"]=u.mouseout,G["tooltip-data"]=u.toolTip}}}}},c._createDataPlot=function(a){this._setPatternInfo(a),this._createPatternPlot(a),this._createPlotValue(a)},c._setPatternInfo=function(a){var b=void 0!==a.categories?a.categories.category:null;if(!b)return null;var c=a.dataset;if(!c)return null;var d=a.rotateXY,e=a.XYPlot,f=this._getCanvasBBox(a),g=0,h=a.showToolTip,i=a.toolTipSepChar,j=(a.seriesNameInToolTip,Math.floor(a.canvasBorderThickness-0)),k={x:f.x+j/2,y:f.y+j/2,x2:f.x2-j/2,y2:f.y2-j/2},l=0,m=0,n=0,o=0,p=Math.floor(a.plotMaxWidth-0),q=this._getDatasets(a,this._CONST.PATTERN.COLUMN),r=0;if(0!==q.length){l=this._CONST.ENABLE===d?(f.height-0)/b.length:(f.width-0)/b.length;for(var s={},t=0,u=q.length;t<u;t++){var v=c[t],w=v.parentYAxis,x=v.stackedGroup;x?s[w+x]||(s[w+x]=1,r++):r++}m=Math.floor(a.plotSetPadding-0),n=Math.floor(a.plotPadding-0),o=(l-m)/r,o=p<o?p:o}for(var g=0,y={},t=0,u=c.length;t<u;t++){var v=c[t],w=v.parentYAxis,z=v.seriesName||"",A=v.pattern,x=v.stackedGroup,B=Math.floor(v.lineCurvature-0)/100,C=w+"_"+A+"_"+x,D=0;x?void 0===y[C]?(y[C]={},y[C].stackedValue={},y[C].stackedData={},this._CONST.PATTERN.COLUMN===A&&(y[C].colIndex=g++,D=y[C].colIndex)):this._CONST.PATTERN.COLUMN===A&&(D=y[C].colIndex):this._CONST.PATTERN.COLUMN===A&&(D=g++);var E=Math.floor(this._getYAxisPos(a,0,w));Raphael.svg&&(E+=.5);var F=Math.floor(this._getXAxisPos(a,0)),G=v.set;if(G){var H=this._CONST.ENABLE===e?G.length:G.length<b.length?G.length:b.length;H<G.length&&(G.length=H);for(var I=0,J=H;I<J;I++){var K=G[I],L=K.y||0,M=0,N=null;if(x&&(void 0===y[C].stackedValue[I]?y[C].stackedValue[I]=L:(M=y[C].stackedValue[I],y[C].stackedValue[I]+=L),void 0===y[C].stackedData[I]?y[C].stackedData[I]=K:(N=y[C].stackedData[I],y[C].stackedData[I]=K)),N)this._CONST.ENABLE===d?(K.p0={x:N.p0.x+(this._getXAxisPos(a,L)-F),y:N.p0.y},K.p1={x:N.p0.x,y:N.p1.y}):(K.p0={x:N.p0.x,y:N.p0.y+(this._getYAxisPos(a,L,w)-E)},K.p1={x:N.p1.x,y:N.p0.y});else if(this._CONST.ENABLE===d){var O=0;O=this._CONST.ENABLE!==e&&this._CONST.PATTERN.COLUMN===A?f.y+(.5+I)*l+(D+.5-r/2)*o:this._getYAxisPos(a,this._CONST.ENABLE===e?K.x:I);var P=this._CONST.PATTERN.COLUMN===A?O-(o-n)/2:O,E=this._CONST.PATTERN.COLUMN===A?O+(o-n)/2:O,Q=this._getXAxisPos(a,L);K.p0={x:Q,y:E},K.p1={x:F,y:P}}else{var R=0;R=this._CONST.ENABLE!==e&&this._CONST.PATTERN.COLUMN===A?f.x+(.5+I)*l+(D+.5-r/2)*o:this._getXAxisPos(a,this._CONST.ENABLE===e?K.x:I);var F=this._CONST.PATTERN.COLUMN===A?R-(o-n)/2:R,Q=this._CONST.PATTERN.COLUMN===A?R+(o-n)/2:R,P=this._getYAxisPos(a,L,w);K.p0={x:F,y:P},K.p1={x:Q,y:E}}if(this._CONST.PATTERN.AREA===A||this._CONST.PATTERN.LINE===A){if(2<=I){var S=this._calcBezierAnchor(d,G[I-2].p0,G[I-1].p0,G[I].p0,B),T=S.cp0,U=S.cp1;this._CONST.ENABLE===d?(T.x=k.x>T.x?k.x:T.x,T.x=k.x2<T.x?k.x2:T.x,U.x=k.x>U.x?k.x:U.x,U.x=k.x2<U.x?k.x2:U.x):(T.y=k.y>T.y?k.y:T.y,T.y=k.y2<T.y?k.y2:T.y,U.y=k.y>U.y?k.y:U.y,U.y=k.y2<U.y?k.y2:U.y),G[I-1].bcp0=S.cp0,G[I-1].bcp1=S.cp1}0!==I&&J-1!==I||(K.bcp0={x:K.p0.x,y:K.p0.y},K.bcp1={x:K.p0.x,y:K.p0.y}),this._CONST.PATTERN.AREA===A&&(N?(K.sbcp0={x:N.bcp0.x,y:N.bcp0.y},K.sbcp1={x:N.bcp1.x,y:N.bcp1.y}):(K.sbcp0={x:K.x2,y:K.y2},K.sbcp1={x:K.x2,y:K.y2}))}if(K.displayValue=this._getFormatNumber(a,L-0+M),this._CONST.ENABLE===h){var V=[];if(this._CONST.ENABLE===a.XYPlot)z?(V[V.length]=z,V[V.length]=K.displayValue):V[V.length]=K.displayValue;else{var W=b[I].label||"";z?(V[V.length]=z,V[V.length]=W,V[V.length]=K.displayValue):(V[V.length]=W,V[V.length]=K.displayValue)}this._CONST.PATTERN.BUBBLE===A&&(V[V.length]=K.r||"0"),K.toolTip=V.join(i)}}}}},c._createDivLine=function(a,b){var c=a.rotateXY,d=a.XYPlot,e=this._getCanvasBBox(a),f=e.x,g=e.y,h=e.x2,i=e.y2,j=(e.width,e.height,Math.floor(a.canvasBorderThickness-0)),k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null;if(this._CONST.DIVLINE.H===b?(k=a.axises.PYAxiseset,l=a.hDivLineColor,m=Math.floor(a.hDivLineThickness-0),n=Math.floor(a.hDivLineAlpha-0)/100,divLineIsDashed=a.hDivLineIsDashed,o=this._CONST.ENABLE===a.hDivLineIsDashed?a.hDivLineDashStyle:"",p=a.showAlternateHGridColor,q=a.alternateHGridColor,r=Math.floor(a.alternateHGridAlpha-0)/100,s=a.showHZeroPlane,t=a.hZeroPlaneColor,u=Math.floor(a.hZeroPlaneThickness-0),v=Math.floor(a.hZeroPlaneAlpha-0)/100,w=this._CONST.ENABLE===a.hZeroPlaneIsDashed?a.hZeroPlaneDashStyle:""):(k=a.axises.xAxiseset,l=a.vDivLineColor,m=Math.floor(a.vDivLineThickness-0),n=Math.floor(a.vDivLineAlpha-0)/100,divLineIsDashed=a.vDivLineIsDashed,o=this._CONST.ENABLE===a.vDivLineIsDashed?a.vDivLineDashStyle:"",p=a.showAlternateVGridColor,q=a.alternateVGridColor,r=Math.floor(a.alternateVGridAlpha-0)/100,s=a.showVZeroPlane,t=a.vZeroPlaneColor,u=Math.floor(a.vZeroPlaneThickness-0),v=Math.floor(a.vZeroPlaneAlpha-0)/100,w=this._CONST.ENABLE===a.vZeroPlaneIsDashed?a.vZeroPlaneDashStyle:""),this._CONST.ENABLE===a.rotateXY&&(b=this._CONST.DIVLINE.H===b?this._CONST.DIVLINE.V:this._CONST.DIVLINE.H),this._CONST.ENABLE===p&&0<r)for(var x=0,y=k.length;x<y;x++){var z=null,A=null,B=null,C=null;if(0===x){if(this._CONST.DIVLINE.V===b){var D=Math.floor(this._getXAxisPos(a,k[0].value))-m/2;f<D&&(z=Math.floor(f+j/2),A=Math.floor(g+j/2),B=D,C=Math.floor(i-j/2))}}else if(y-1===x&&1==x%2){if(this._CONST.DIVLINE.V===b){var E=Math.floor(this._getXAxisPos(a,k[y-1].value))+m/2;h>E&&(z=E,A=Math.floor(g+j/2),B=Math.floor(h-j/2),C=Math.floor(i-j/2))}}else 1==x%2&&(this._CONST.DIVLINE.H===b?(z=Math.floor(f+j/2),A=Math.floor(this._getYAxisPos(a,k[x].value,this._CONST.AXIS.PY))-m/2,B=Math.floor(h-j/2),C=Math.floor(this._getYAxisPos(a,k[x+1].value,this._CONST.AXIS.PY))+m/2):(z=Math.floor(this._getXAxisPos(a,k[x].value))-m/2,A=Math.floor(g+j/2),B=Math.floor(this._getXAxisPos(a,k[x+1].value))+m/2,C=Math.floor(i-j/2)),Raphael.svg?(A+=m/2,k.length-2===x&&(C+=j/2-m/2),B+=1):k.length-2===x&&(C+=j/2-m/2));if(z){var F=[];F[F.length]=["M",z,A],F[F.length]=["L",B,A],F[F.length]=["L",B,C],F[F.length]=["L",z,C],F[F.length]=["Z"],this._paper.path(F).attr({"stroke-width":0,fill:this._getColor(q),"fill-opacity":r})}}if(0<m&&0<n)for(var x=0,y=k.length;x<y;x++)if(this._CONST.DIVLINE.H===b){var z=Math.floor(f+j/2),A=Math.floor(this._getYAxisPos(a,k[x].value,this._CONST.AXIS.PY)),B=Math.floor(h-j/2),C=A;if(Raphael.svg&&(B+=1),this._createHLine(z,A,B,C,m).attr({stroke:this._getColor(l),"stroke-width":m,"stroke-opacity":n,"stroke-dasharray":o}),0!==x&&y-1-x){var G=k[x].value;this._CONST.ENABLE!==s||null==G||0!=G-0||this._CONST.ENABLE!=d&&this._CONST.ENABLE===c||this._createHLine(z,A,B,C,u).attr({stroke:this._getColor(t),"stroke-width":u,"stroke-opacity":v,"stroke-dasharray":w})}}else{var z=Math.floor(this._getXAxisPos(a,k[x].value)),A=Math.floor(g+j/2),B=z,C=Math.floor(i-j/2);if(Raphael.svg&&(C+=1),this._createVLine(z,A,B,C,m).attr({stroke:this._getColor(l),"stroke-width":m,"stroke-opacity":n,"stroke-dasharray":o}),this._CONST.ENABLE===s&&0!==x&&y-1-x&&(this._CONST.ENABLE==d||this._CONST.ENABLE===c)){var G=k[x].value;null!=G&&0==G-0&&this._createVLine(z,A,B,C,u).attr({stroke:this._getColor(t),"stroke-width":u,"stroke-opacity":v,"stroke-dasharray":w})}}},c._createSepLine=function(a){var b=a.axises.xAxiseset;if(b){var c=this._getCanvasBBox(a),d=c.x,e=c.y,f=c.x2,g=c.y2,h=Math.floor(a.canvasBorderThickness-0),i=a.categories,j=Math.floor(i.sepLineThickness-0),k=i.sepLineColor,l=Math.floor(i.sepLineAlpha-0)/100,m=this._CONST.ENABLE===i.sepLineDashed?i.sepLineDashedStyle:"";if(!(1>j))for(var n=0,o=b.length-1;n<o;n++){var p=b[n],q=b[n+1];if(this._CONST.ENABLE===p.visiable&&this._CONST.ENABLE===q.visiable){var r=(p.value+q.value)/2,s=null,t=null,u=null,v=null;this._CONST.ENABLE===a.rotateXY?(s=Math.floor(d+h/2),t=Math.floor(this._getYAxisPos(a,r,this._CONST.AXIS.PY)),u=Math.floor(f-h/2),v=t):(s=Math.floor(this._getXAxisPos(a,r)),t=Math.floor(e+h/2),u=s,v=Math.floor(g-h/2)),this._createVLine(s,t,u,v,j).attr({stroke:this._getColor(k),"stroke-width":j,"stroke-opacity":l,"stroke-dasharray":m})}}}},c._createVDivLine=function(a){this._createDivLine(a,this._CONST.DIVLINE.V)},c._createHDivLine=function(a){this._createDivLine(a,this._CONST.DIVLINE.H)},c._createHLine=function(a,b,c,d,e){var f=0;Raphael.svg&&this._isOdd(e)?f+=.5:Raphael.vml&&!this._isOdd(e)&&(f+=.5);var g=[];return g[g.length]=["M",a,b+f],g[g.length]=["L",c,d+f],this._paper.path(g)},c._createVLine=function(a,b,c,d,e){var f=0;Raphael.svg&&this._isOdd(e)?f+=.5:Raphael.vml&&!this._isOdd(e)&&(f+=.5);var g=[];return g[g.length]=["M",a+f,b],g[g.length]=["L",c+f,d],this._paper.path(g)},c._getXAxisPos=function(a,b){if(b=b||0,void 0!==this._getXAxisPosCurrying)return this._getXAxisPosCurrying(b);var c=null;c=this._CONST.ENABLE===a.rotateXY?a.axises.PYAxiseset:a.axises.xAxiseset;var d=this._getXAxisLabelBBox(a),e=c[0].value,f=c[c.length-1].value;return this._getXAxisPosCurrying=function(a){return d.x+(d.x2-d.x)/(f-e)*(a-e)},this._getXAxisPosCurrying(b)},c._getYAxisPos=function(a,b,c){if(this._CONST.AXIS.SY===c){if(void 0!==this._getSYAxisPosCurrying)return this._getSYAxisPosCurrying(b);var d=this._getSYAxisLabelBBox(a),e=a.axises.SYAxiseset,f=d.y,g=d.y2;if(!e||0===e.length)return g;var h=e[0].value-0,i=e[e.length-1].value-0;return this._getSYAxisPosCurrying=function(a){return g-(g-f)/(i-h)*(a-h)},this._getSYAxisPosCurrying(b)}if(void 0!==this._getPYAxisPosCurrying)return this._getPYAxisPosCurrying(b);var d=this._getPYAxisLabelBBox(a),e=null;e=this._CONST.ENABLE===a.rotateXY?a.axises.xAxiseset:a.axises.PYAxiseset;var f=d.y,g=d.y2;if(!e||0===e.length)return g;var h=e[0].value-0,i=e[e.length-1].value-0;return this._getPYAxisPosCurrying=function(a){return g-(g-f)/(i-h)*(a-h)},this._getPYAxisPosCurrying(b)}}).call(this,window);